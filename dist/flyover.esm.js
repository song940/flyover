var e=window.navigator.userAgent,t=/iPhone|iPad|iPod/i.test(e),n=/AliApp\(AP\/([\d\.]+)\)/i.test(e),o=/AliApp\(KB\/([\d\.]+)\)/i.test(e),r=/AliApp\(AM\/([\d\.]+)\)/i.test(e),i=/AliApp\(TB\/([\d\.]+)\)/i.test(e),a=/AliApp\(TM\/([\d\.]+)\)/i.test(e),u=/AliApp\(AFW\/([\d\.]+)\)/i.test(e),s=/AliApp\(BK\/([\d\.]+)\)/i.test(e),c=/AliApp\(DingTalk\/([\d\.]+)\)/i.test(e),l=/AliApp\(QN\/([\d\.]+)\)/i.test(e),d=/amap/i.test(e),p=/Inside/i.test(e),f=Object.freeze({__proto__:null,isIOS:t,isAlipay:n,isKoubei:o,isKoubeiMerchant:r,isTaobao:i,isTmall:a,isWealth:u,isMyBank:s,isDingTalk:c,isQianNiu:l,isAmap:d,isInside:p}),g=function(e,t){return document.addEventListener(e,t,!1),function(){return document.removeEventListener(e,t)}},h=function(e,t,n){var o=e.split("."),r=o[0],i=o[1];return(window.WindVane||window.lib&&window.lib.windvane).call(r,i,t,(function(e){return n&&n(null,e)}),(function(e){return n&&n(e)}))},T=function(e,t){return new Promise((function(n,o){return h(e,t,(function(e,t){if(e)return o(e);n(t)}))}))},v=function(e,t){void 0===t&&(t={});var n=t.duration;return h("WVUIToast.toast",{message:e,duration:n})},w=function(e,t){void 0===t&&(t={});var n=t.buttonText,o=void 0===n?"确定":n,r=Date.now();return T("WVUIDialog.alert",{message:e,okbutton:o,identifier:r}).then((function(){return e=r,new Promise((function(t){var n=g("WV.Event.Alert",(function(o){var r=(o.param||{}).identifier;r&&e===r&&(t(o),n())}))}));var e}))},b=function(e,t){void 0===t&&(t={});var n=t.okbutton,o=void 0===n?"确定":n,r=t.canclebutton,i=void 0===r?"取消":r,a=Date.now();return T("WVUIDialog.confirm",{message:e,okbutton:o,canclebutton:i,_index:a}).then((function(){return e=a,t=o,new Promise((function(n){var o=g("wv.dialog",(function(r){var i=r.param||{},a=i.type;i._index===e&&(n(a===t),o())}))}));var e,t}))},m=function(){return T("WVUI.showLoadingBox")},y=function(){return T("WVUI.hideLoadingBox")},A=function(e){return T("Base.copyToClipboard",{text:e})},L=Object.freeze({__proto__:null,toast:v,alert:w,confirm:b,showLoading:m,hideLoading:y,copyToClipboard:A}),I=function(){return(I=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function B(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}function C(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)}var W=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];C((function(){return AlipayJSBridge.call.apply(AlipayJSBridge,B([e],t))}))},_=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Promise((function(n,o){return t.push((function(t){console.log("AlipayJSBridge.call("+e+")",t),n(t)})),W.apply(void 0,B([e],t))}))},k=function(e){if(e.success)return e.data;throw new Error},S=function(e,t,n){return _("rpc",I({operationType:e,requestData:[t]},n))},M=function(e,t){var n=t||{},o=n.extInfo,r=n.immediately,i=n.multiCallback;return _("getCdpSpaceInfos",{spaceCodes:e,extInfo:o,immediately:r,multiCallback:i})},O=function(e,t){var n=t||{},o=n.extInfo,r=n.immediately,i=n.multiCallback;return _("getCdpSpaceInfo",{spaceCode:e,extInfo:o,immediately:r,multiCallback:i})},P=function(e,t,n){return void 0===n&&(n="SHOW"),_("cdpFeedback",{spaceCode:e,objectId:t,behavior:n})},x=function(e){return _("getUserInfo",e)},N=function(e,t){return _("toast",I({content:e},t))},U=function(e,t){var n=void 0===t?{}:t,o=n.title,r=n.buttonText;return _("alert",{title:o,message:e,button:r})},R=function(e,t,n){return W("addNotifyListener",I({name:e},t),n),function(){return j(e)}},j=function(e){return _("removeNotifyListener",{name:e})},H=function(e,t){return _("postNotification",{name:e,data:t})},z=function(e,t,n){return e||(e="​"),_("setTitle",I({title:e},t),n)},D=function(e){return 0!==e.indexOf("#")?e:parseInt(e.slice(1),16)},F=function(e){"string"==typeof e&&(e={color:D(e)});var t=e.color,n=e.reset,o=void 0!==n&&n,r=e.resetTransparent;return _("setTitleColor",{color:t,reset:o,resetTransparent:void 0!==r&&r})},V=function(){return F({reset:!0})},E=function(e){return _("setTransparentTitle",{transparentTitle:e})},J=function(){return F({resetTransparent:!0})},K=function(){return _("getTitleAndStatusbarHeight")},Q=function(){return _("hideBackButton")},q=function(){return _("showBackButton")},G=function(){return _("showTitleLoading")},X=function(){return _("hideTitleLoading")},Y=function(e,t){var n=void 0===t?{}:t,o=n.title,r=n.okButton,i=n.cancelButton;return _("confirm",{title:o,message:e,okButton:r,cancelButton:i}).then((function(e){return e.ok}))},Z=function(){return _("showLoading").then(k)},$=function(){return _("hideLoading").then(k)},ee=function(){return _("popWindow")},te=function(e,t){return _("pushWindow",{url:e,param:t})},ne=function(){return _("closeWebview")},oe=function(e){return _("subscribeMsgbox",{serviceCode:e})},re=function(e,t){W("setOptionMenu",e),W("showOptionMenu");var n=g("optionMenu",t);return function(){ie(),n()}},ie=function(){return W("hideOptionMenu")},ae=function(e){return _("openInBrowser",{url:e})},ue=function(){return _("restorePullToRefresh")},se=Object.freeze({__proto__:null,ready:C,call:W,pcall:_,handleResponse:k,rpc:S,getCdpSpaceInfos:M,getCdpSpaceInfo:O,cdpFeedback:P,getUserInfo:x,toast:N,alert:U,addNotifyListener:R,removeNotifyListener:j,postNotification:H,setTitle:z,setTitleColor:F,resetTitleColor:V,setTransparentTitle:E,resetTransparentTitle:J,getTitleAndStatusbarHeight:K,hideBackButton:Q,showBackButton:q,showTitleLoading:G,hideTitleLoading:X,confirm:Y,showLoading:Z,hideLoading:$,popWindow:ee,pushWindow:te,closeWebview:ne,subscribeMsgbox:oe,optionMenu:re,hideOptionMenu:ie,openInBrowser:ae,restorePullToRefresh:ue}),ce=Object.freeze({__proto__:null,ready:C,call:W,pcall:_,handleResponse:k,rpc:S,getCdpSpaceInfos:M,getCdpSpaceInfo:O,cdpFeedback:P,getUserInfo:x,toast:N,alert:U,addNotifyListener:R,removeNotifyListener:j,postNotification:H,setTitle:z,setTitleColor:F,resetTitleColor:V,setTransparentTitle:E,resetTransparentTitle:J,getTitleAndStatusbarHeight:K,hideBackButton:Q,showBackButton:q,showTitleLoading:G,hideTitleLoading:X,confirm:Y,showLoading:Z,hideLoading:$,popWindow:ee,pushWindow:te,closeWebview:ne,subscribeMsgbox:oe,optionMenu:re,hideOptionMenu:ie,openInBrowser:ae,restorePullToRefresh:ue,getAlipayUserId:function(){return _("getAlipayUserId").then((function(e){return e.alipayUserId}))}}),le=Object.freeze({__proto__:null,ready:C,call:W,pcall:_,handleResponse:k,rpc:S,getCdpSpaceInfos:M,getCdpSpaceInfo:O,cdpFeedback:P,getUserInfo:x,toast:N,alert:U,addNotifyListener:R,removeNotifyListener:j,postNotification:H,setTitle:z,setTitleColor:F,resetTitleColor:V,setTransparentTitle:E,resetTransparentTitle:J,getTitleAndStatusbarHeight:K,hideBackButton:Q,showBackButton:q,showTitleLoading:G,hideTitleLoading:X,confirm:Y,showLoading:Z,hideLoading:$,popWindow:ee,pushWindow:te,closeWebview:ne,subscribeMsgbox:oe,optionMenu:re,hideOptionMenu:ie,openInBrowser:ae,restorePullToRefresh:ue}),de=Object.freeze({__proto__:null,toast:v,alert:w,confirm:b,showLoading:m,hideLoading:y,copyToClipboard:A});function pe(e){var t=document.createElement("a");return t.href=e,e=t.href,t=null,e}var fe=Object.freeze({__proto__:null,toast:v,alert:w,confirm:b,showLoading:m,hideLoading:y,copyToClipboard:A,popWindow:function(){QN.navigator.pop()},getAbsoluteURL:pe,pushWindow:function(e,t){void 0===t&&(t={});var n=t.data;return new Promise((function(t,o){try{QN.navigator.push({url:pe(e),query:n}),t()}catch(e){o(e)}}))}}),ge=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return a?L[e].apply(L,t):i?de[e].apply(de,t):n?se[e].apply(se,t):s?ce[e].apply(ce,t):o?le[e].apply(le,t):l?fe[e].apply(fe,t):Promise.reject()},he=function(e,t){return ge("toast",e,t)},Te=function(e,t){return ge("alert",e,t)},ve=function(e,t){return ge("confirm",e,t)},we=function(){return ge("showLoading")},be=function(){return ge("hideLoading")},me=function(e,t){return ge("pushWindow",e,t)},ye=function(){return ge("popWindow")},Ae=function(){return ge("closeWebview")},Le=function(){return ge("restorePullToRefresh")},Ie=function(e){return ge("setTitle",e)},Be=function(e,t){return ge("setTitleColor",e,t)},Ce=function(e){return ge("setTransparentTitle",e)},We=function(){return ge("getTitleAndStatusbarHeight")},_e=function(e,t){return ge("optionMenu",e,t)},ke=function(e){return ge("ready",e)},Se=function(e){return g("resume",e)},Me=function(e){return g("pause",e)},Oe=function(e){return g("back",e)},Pe=function(e){return g("firePullToRefresh",e)},xe=function(e,t){return ge("getCdpSpaceInfos",e,t)},Ne=function(e,t){return ge("getCdpSpaceInfo",e,t)},Ue=function(e,t,n){return void 0===n&&(n="SHOW"),ge("cdpFeedback",e,t,n)};export{g as addEventListener,Te as alert,se as alipay,ge as call,Ue as cdpFeedback,Ae as closeWebview,ve as confirm,f as detect,Ne as getCdpSpaceInfo,xe as getCdpSpaceInfos,We as getTitleAndStatusbarHeight,be as hideLoading,n as isAlipay,d as isAmap,c as isDingTalk,t as isIOS,p as isInside,o as isKoubei,r as isKoubeiMerchant,s as isMyBank,l as isQianNiu,i as isTaobao,a as isTmall,u as isWealth,le as koubei,ce as mybank,Oe as onBack,Me as onPause,Pe as onPullToRefresh,ke as onReady,Se as onResume,_e as optionMenu,ye as popWindow,me as pushWindow,fe as qianniu,Le as restorePullToRefresh,Ie as setTitle,Be as setTitleColor,Ce as setTransparentTitle,we as showLoading,de as taobao,L as tmall,he as toast};
