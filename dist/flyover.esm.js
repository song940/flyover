var e=window.navigator.userAgent,t=/iPhone|iPad|iPod/i.test(e),n=/AliApp\(AP\/([\d\.]+)\)/i.test(e),o=/AliApp\(KB\/([\d\.]+)\)/i.test(e),r=/AliApp\(AM\/([\d\.]+)\)/i.test(e),i=/AliApp\(TB\/([\d\.]+)\)/i.test(e),a=/AliApp\(TM\/([\d\.]+)\)/i.test(e),u=/AliApp\(AFW\/([\d\.]+)\)/i.test(e),s=/AliApp\(BK\/([\d\.]+)\)/i.test(e),c=/AliApp\(DingTalk\/([\d\.]+)\)/i.test(e),l=/AliApp\(QN\/([\d\.]+)\)/i.test(e),d=/amap/i.test(e),p=/Inside/i.test(e),f=Object.freeze({__proto__:null,isIOS:t,isAlipay:n,isKoubei:o,isKoubeiMerchant:r,isTaobao:i,isTmall:a,isWealth:u,isMyBank:s,isDingTalk:c,isQianNiu:l,isAmap:d,isInside:p}),g=function(e,t){return document.addEventListener(e,t,!1),function(){return document.removeEventListener(e,t)}},h=function(e,t,n){var o=e.split("."),r=o[0],i=o[1];return(window.WindVane||window.lib&&window.lib.windvane).call(r,i,t,(function(e){return n&&n(null,e)}),(function(e){return n&&n(e)}))},b=function(e,t){return new Promise((function(n,o){return h(e,t,(function(e,t){if(e)return o(e);n(t)}))}))},v=function(e,t){void 0===t&&(t={});var n=t.duration;return h("WVUIToast.toast",{message:e,duration:n})},w=function(e,t){void 0===t&&(t={});var n=t.buttonText,o=void 0===n?"确定":n,r=Date.now();return b("WVUIDialog.alert",{message:e,okbutton:o,identifier:r}).then((function(){return e=r,new Promise((function(t){var n=g("WV.Event.Alert",(function(o){var r=(o.param||{}).identifier;r&&e===r&&(t(o),n())}))}));var e}))},m=function(e,t){void 0===t&&(t={});var n=t.okbutton,o=void 0===n?"确定":n,r=t.canclebutton,i=void 0===r?"取消":r,a=Date.now();return b("WVUIDialog.confirm",{message:e,okbutton:o,canclebutton:i,_index:a}).then((function(){return e=a,t=o,new Promise((function(n){var o=g("wv.dialog",(function(r){var i=r.param||{},a=i.type;i._index===e&&(n(a===t),o())}))}));var e,t}))},T=function(){return b("WVUI.showLoadingBox")},y=function(){return b("WVUI.hideLoadingBox")},A=function(e){return b("Base.copyToClipboard",{text:e})},I=Object.freeze({__proto__:null,toast:v,alert:w,confirm:m,showLoading:T,hideLoading:y,copyToClipboard:A}),B=function(){return(B=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function L(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}function W(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)}var C=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];W((function(){return AlipayJSBridge.call.apply(AlipayJSBridge,L([e],t))}))},_=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Promise((function(n,o){return t.push((function(t){console.log("AlipayJSBridge.call("+e+")",t),n(t)})),C.apply(void 0,L([e],t))}))},k=function(e){if(e.success)return e.data;throw new Error},S=function(e,t,n){return _("rpc",B({operationType:e,requestData:[t]},n))},M=function(e,t){var n=t||{},o=n.extInfo,r=n.immediately,i=n.multiCallback;return _("getCdpSpaceInfos",{spaceCodes:e,extInfo:o,immediately:r,multiCallback:i})},O=function(e,t){var n=t||{},o=n.extInfo,r=n.immediately,i=n.multiCallback;return _("getCdpSpaceInfo",{spaceCode:e,extInfo:o,immediately:r,multiCallback:i})},P=function(e,t,n){return void 0===n&&(n="SHOW"),_("cdpFeedback",{spaceCode:e,objectId:t,behavior:n})},x=function(e){return _("getUserInfo",e)},N=function(e,t){return _("toast",B({content:e},t))},U=function(e,t){var n=void 0===t?{}:t,o=n.title,r=n.buttonText;return _("alert",{title:o,message:e,button:r})},R=function(e,t,n){return C("addNotifyListener",B({name:e},t),n),function(){return j(e)}},j=function(e){return _("removeNotifyListener",{name:e})},H=function(e,t){return _("postNotification",{name:e,data:t})},z=function(e,t){return _("setTitle",{title:e},t)},D=function(e,t){return void 0===t&&(t=!1),"string"==typeof e&&(e=function(e){return 0!==e.indexOf("#")?e:parseInt(e.slice(1),16)}(e)),_("setTitleColor",{color:e,reset:t})},F=function(e){return _("setTransparentTitle",e)},V=function(){return _("getTitleAndStatusbarHeight")},E=function(){return _("hideBackButton")},J=function(){return _("showBackButton")},K=function(e,t){var n=void 0===t?{}:t,o=n.title,r=n.okButton,i=n.cancelButton;return _("confirm",{title:o,message:e,okButton:r,cancelButton:i}).then((function(e){return e.ok}))},Q=function(){return _("showLoading").then(k)},q=function(){return _("hideLoading").then(k)},G=function(){return _("popWindow")},X=function(e,t){return _("pushWindow",{url:e,param:t})},Y=function(){return _("closeWebview")},Z=function(e){return _("subscribeMsgbox",{serviceCode:e})},$=function(e,t){C("setOptionMenu",e),C("showOptionMenu");var n=g("optionMenu",t);return function(){ee(),n()}},ee=function(){return C("hideOptionMenu")},te=function(e){return _("openInBrowser",{url:e})},ne=function(){return _("restorePullToRefresh")},oe=Object.freeze({__proto__:null,ready:W,call:C,pcall:_,handleResponse:k,rpc:S,getCdpSpaceInfos:M,getCdpSpaceInfo:O,cdpFeedback:P,getUserInfo:x,toast:N,alert:U,addNotifyListener:R,removeNotifyListener:j,postNotification:H,setTitle:z,setTitleColor:D,setTransparentTitle:F,getTitleAndStatusbarHeight:V,hideBackButton:E,showBackButton:J,confirm:K,showLoading:Q,hideLoading:q,popWindow:G,pushWindow:X,closeWebview:Y,subscribeMsgbox:Z,optionMenu:$,hideOptionMenu:ee,openInBrowser:te,restorePullToRefresh:ne}),re=Object.freeze({__proto__:null,ready:W,call:C,pcall:_,handleResponse:k,rpc:S,getCdpSpaceInfos:M,getCdpSpaceInfo:O,cdpFeedback:P,getUserInfo:x,toast:N,alert:U,addNotifyListener:R,removeNotifyListener:j,postNotification:H,setTitle:z,setTitleColor:D,setTransparentTitle:F,getTitleAndStatusbarHeight:V,hideBackButton:E,showBackButton:J,confirm:K,showLoading:Q,hideLoading:q,popWindow:G,pushWindow:X,closeWebview:Y,subscribeMsgbox:Z,optionMenu:$,hideOptionMenu:ee,openInBrowser:te,restorePullToRefresh:ne,getAlipayUserId:function(){return _("getAlipayUserId").then((function(e){return e.alipayUserId}))}}),ie=Object.freeze({__proto__:null,ready:W,call:C,pcall:_,handleResponse:k,rpc:S,getCdpSpaceInfos:M,getCdpSpaceInfo:O,cdpFeedback:P,getUserInfo:x,toast:N,alert:U,addNotifyListener:R,removeNotifyListener:j,postNotification:H,setTitle:z,setTitleColor:D,setTransparentTitle:F,getTitleAndStatusbarHeight:V,hideBackButton:E,showBackButton:J,confirm:K,showLoading:Q,hideLoading:q,popWindow:G,pushWindow:X,closeWebview:Y,subscribeMsgbox:Z,optionMenu:$,hideOptionMenu:ee,openInBrowser:te,restorePullToRefresh:ne}),ae=Object.freeze({__proto__:null,toast:v,alert:w,confirm:m,showLoading:T,hideLoading:y,copyToClipboard:A});function ue(e){var t=document.createElement("a");return t.href=e,e=t.href,t=null,e}var se=Object.freeze({__proto__:null,toast:v,alert:w,confirm:m,showLoading:T,hideLoading:y,copyToClipboard:A,popWindow:function(){QN.navigator.pop()},getAbsoluteURL:ue,pushWindow:function(e,t){void 0===t&&(t={});var n=t.data;return new Promise((function(t,o){try{QN.navigator.push({url:ue(e),query:n}),t()}catch(e){o(e)}}))}}),ce=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return a?I[e].apply(I,t):i?ae[e].apply(ae,t):n?oe[e].apply(oe,t):s?re[e].apply(re,t):o?ie[e].apply(ie,t):l?se[e].apply(se,t):Promise.reject()},le=function(e,t){return ce("toast",e,t)},de=function(e,t){return ce("alert",e,t)},pe=function(e,t){return ce("confirm",e,t)},fe=function(){return ce("showLoading")},ge=function(){return ce("hideLoading")},he=function(e,t){return ce("pushWindow",e,t)},be=function(){return ce("popWindow")},ve=function(){return ce("closeWebview")},we=function(){return ce("restorePullToRefresh")},me=function(e){return ce("setTitle",e)},Te=function(e,t){return ce("setTitleColor",e,t)},ye=function(e){return ce("setTransparentTitle",e)},Ae=function(){return ce("getTitleAndStatusbarHeight")},Ie=function(e,t){return ce("optionMenu",e,t)},Be=function(e){return ce("ready",e)},Le=function(e){return g("resume",e)},We=function(e){return g("pause",e)},Ce=function(e){return g("back",e)},_e=function(e){return g("firePullToRefresh",e)},ke=function(e,t){return ce("getCdpSpaceInfos",e,t)},Se=function(e,t){return ce("getCdpSpaceInfo",e,t)},Me=function(e,t,n){return void 0===n&&(n="SHOW"),ce("cdpFeedback",e,t,n)};export{g as addEventListener,de as alert,oe as alipay,ce as call,Me as cdpFeedback,ve as closeWebview,pe as confirm,f as detect,Se as getCdpSpaceInfo,ke as getCdpSpaceInfos,Ae as getTitleAndStatusbarHeight,ge as hideLoading,n as isAlipay,d as isAmap,c as isDingTalk,t as isIOS,p as isInside,o as isKoubei,r as isKoubeiMerchant,s as isMyBank,l as isQianNiu,i as isTaobao,a as isTmall,u as isWealth,ie as koubei,re as mybank,Ce as onBack,We as onPause,_e as onPullToRefresh,Be as onReady,Le as onResume,Ie as optionMenu,be as popWindow,he as pushWindow,se as qianniu,we as restorePullToRefresh,me as setTitle,Te as setTitleColor,ye as setTransparentTitle,fe as showLoading,ae as taobao,I as tmall,le as toast};
