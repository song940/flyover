!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Flyover={})}(this,(function(e){"use strict";var t=window.navigator.userAgent,n=/iPhone|iPad|iPod/i.test(t),o=/AliApp\(AP\/([\d\.]+)\)/i.test(t),i=/AliApp\(KB\/([\d\.]+)\)/i.test(t),r=/AliApp\(AM\/([\d\.]+)\)/i.test(t),a=/AliApp\(TB\/([\d\.]+)\)/i.test(t),u=/AliApp\(TM\/([\d\.]+)\)/i.test(t),s=/AliApp\(AFW\/([\d\.]+)\)/i.test(t),l=/AliApp\(BK\/([\d\.]+)\)/i.test(t),c=/AliApp\(DingTalk\/([\d\.]+)\)/i.test(t),d=/AliApp\(QN\/([\d\.]+)\)/i.test(t),p=/amap/i.test(t),f=/Inside/i.test(t),g=Object.freeze({__proto__:null,isIOS:n,isAlipay:o,isKoubei:i,isKoubeiMerchant:r,isTaobao:a,isTmall:u,isWealth:s,isMyBank:l,isDingTalk:c,isQianNiu:d,isAmap:p,isInside:f}),h=function(e,t){return document.addEventListener(e,t,!1),function(){return document.removeEventListener(e,t)}},T=function(e,t,n){var o=e.split("."),i=o[0],r=o[1];return(window.WindVane||window.lib&&window.lib.windvane).call(i,r,t,(function(e){return n&&n(null,e)}),(function(e){return n&&n(e)}))},b=function(e,t){return new Promise((function(n,o){return T(e,t,(function(e,t){if(e)return o(e);n(t)}))}))},v=function(e,t){void 0===t&&(t={});var n=t.duration;return T("WVUIToast.toast",{message:e,duration:n})},w=function(e,t){void 0===t&&(t={});var n=t.buttonText,o=void 0===n?"确定":n,i=Date.now();return b("WVUIDialog.alert",{message:e,okbutton:o,identifier:i}).then((function(){return e=i,new Promise((function(t){var n=h("WV.Event.Alert",(function(o){var i=(o.param||{}).identifier;i&&e===i&&(t(o),n())}))}));var e}))},m=function(e,t){void 0===t&&(t={});var n=t.okbutton,o=void 0===n?"确定":n,i=t.canclebutton,r=void 0===i?"取消":i,a=Date.now();return b("WVUIDialog.confirm",{message:e,okbutton:o,canclebutton:r,_index:a}).then((function(){return e=a,t=o,new Promise((function(n){var o=h("wv.dialog",(function(i){var r=i.param||{},a=r.type;r._index===e&&(n(a===t),o())}))}));var e,t}))},y=function(){return b("WVUI.showLoadingBox")},A=function(){return b("WVUI.hideLoadingBox")},L=function(e){return b("Base.copyToClipboard",{text:e})},I=Object.freeze({__proto__:null,toast:v,alert:w,confirm:m,showLoading:y,hideLoading:A,copyToClipboard:L}),B=function(){return(B=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function k(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,u=r.length;a<u;a++,i++)o[i]=r[a];return o}function C(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)}var W=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];C((function(){return AlipayJSBridge.call.apply(AlipayJSBridge,k([e],t))}))},_=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Promise((function(n,o){return t.push((function(t){console.log("AlipayJSBridge.call("+e+")",t),n(t)})),W.apply(void 0,k([e],t))}))},S=function(e){if(e.success)return e.data;throw new Error},M=function(e,t,n){return _("rpc",B({operationType:e,requestData:[t]},n))},O=function(e,t){var n=t||{},o=n.extInfo,i=n.immediately,r=n.multiCallback;return _("getCdpSpaceInfos",{spaceCodes:e,extInfo:o,immediately:i,multiCallback:r})},P=function(e,t){var n=t||{},o=n.extInfo,i=n.immediately,r=n.multiCallback;return _("getCdpSpaceInfo",{spaceCode:e,extInfo:o,immediately:i,multiCallback:r})},x=function(e,t,n){return void 0===n&&(n="SHOW"),_("cdpFeedback",{spaceCode:e,objectId:t,behavior:n})},N=function(e){return _("getUserInfo",e)},R=function(e,t){return _("toast",B({content:e},t))},j=function(e,t){var n=void 0===t?{}:t,o=n.title,i=n.buttonText;return _("alert",{title:o,message:e,button:i})},U=function(e,t,n){return W("addNotifyListener",B({name:e},t),n),function(){return D(e)}},D=function(e){return _("removeNotifyListener",{name:e})},F=function(e,t){return _("postNotification",{name:e,data:t})},H=function(e,t,n){return e||(e="​"),_("setTitle",B({title:e},t),n)},z=function(e){return 0!==e.indexOf("#")?e:parseInt(e.slice(1),16)},E=function(e){"string"==typeof e&&(e={color:z(e)});var t=e.color,n=e.reset,o=void 0!==n&&n,i=e.resetTransparent;return _("setTitleColor",{color:t,reset:o,resetTransparent:void 0!==i&&i})},V=function(){return E({reset:!0})},K=function(e){return _("setTransparentTitle",{transparentTitle:e})},J=function(){return E({resetTransparent:!0})},Q=function(){return _("getTitleAndStatusbarHeight")},q=function(){return _("hideBackButton")},G=function(){return _("showBackButton")},X=function(){return _("showTitleLoading")},Y=function(){return _("hideTitleLoading")},Z=function(e,t){var n=void 0===t?{}:t,o=n.title,i=n.okButton,r=n.cancelButton;return _("confirm",{title:o,message:e,okButton:i,cancelButton:r}).then((function(e){return e.ok}))},$=function(){return _("showLoading").then(S)},ee=function(){return _("hideLoading").then(S)},te=function(){return _("popWindow")},ne=function(e,t){return _("pushWindow",{url:e,param:t})},oe=function(){return _("closeWebview")},ie=function(e){return _("subscribeMsgbox",{serviceCode:e})},re=function(e,t){W("setOptionMenu",e),W("showOptionMenu");var n=h("optionMenu",t);return function(){ae(),n()}},ae=function(){return W("hideOptionMenu")},ue=function(e){return _("openInBrowser",{url:e})},se=function(){return _("restorePullToRefresh")},le=Object.freeze({__proto__:null,ready:C,call:W,pcall:_,handleResponse:S,rpc:M,getCdpSpaceInfos:O,getCdpSpaceInfo:P,cdpFeedback:x,getUserInfo:N,toast:R,alert:j,addNotifyListener:U,removeNotifyListener:D,postNotification:F,setTitle:H,setTitleColor:E,resetTitleColor:V,setTransparentTitle:K,resetTransparentTitle:J,getTitleAndStatusbarHeight:Q,hideBackButton:q,showBackButton:G,showTitleLoading:X,hideTitleLoading:Y,confirm:Z,showLoading:$,hideLoading:ee,popWindow:te,pushWindow:ne,closeWebview:oe,subscribeMsgbox:ie,optionMenu:re,hideOptionMenu:ae,openInBrowser:ue,restorePullToRefresh:se}),ce=Object.freeze({__proto__:null,ready:C,call:W,pcall:_,handleResponse:S,rpc:M,getCdpSpaceInfos:O,getCdpSpaceInfo:P,cdpFeedback:x,getUserInfo:N,toast:R,alert:j,addNotifyListener:U,removeNotifyListener:D,postNotification:F,setTitle:H,setTitleColor:E,resetTitleColor:V,setTransparentTitle:K,resetTransparentTitle:J,getTitleAndStatusbarHeight:Q,hideBackButton:q,showBackButton:G,showTitleLoading:X,hideTitleLoading:Y,confirm:Z,showLoading:$,hideLoading:ee,popWindow:te,pushWindow:ne,closeWebview:oe,subscribeMsgbox:ie,optionMenu:re,hideOptionMenu:ae,openInBrowser:ue,restorePullToRefresh:se,getAlipayUserId:function(){return _("getAlipayUserId").then((function(e){return e.alipayUserId}))}}),de=Object.freeze({__proto__:null,ready:C,call:W,pcall:_,handleResponse:S,rpc:M,getCdpSpaceInfos:O,getCdpSpaceInfo:P,cdpFeedback:x,getUserInfo:N,toast:R,alert:j,addNotifyListener:U,removeNotifyListener:D,postNotification:F,setTitle:H,setTitleColor:E,resetTitleColor:V,setTransparentTitle:K,resetTransparentTitle:J,getTitleAndStatusbarHeight:Q,hideBackButton:q,showBackButton:G,showTitleLoading:X,hideTitleLoading:Y,confirm:Z,showLoading:$,hideLoading:ee,popWindow:te,pushWindow:ne,closeWebview:oe,subscribeMsgbox:ie,optionMenu:re,hideOptionMenu:ae,openInBrowser:ue,restorePullToRefresh:se}),pe=Object.freeze({__proto__:null,toast:v,alert:w,confirm:m,showLoading:y,hideLoading:A,copyToClipboard:L});function fe(e){var t=document.createElement("a");return t.href=e,e=t.href,t=null,e}var ge=Object.freeze({__proto__:null,toast:v,alert:w,confirm:m,showLoading:y,hideLoading:A,copyToClipboard:L,popWindow:function(){QN.navigator.pop()},getAbsoluteURL:fe,pushWindow:function(e,t){void 0===t&&(t={});var n=t.data;return new Promise((function(t,o){try{QN.navigator.push({url:fe(e),query:n}),t()}catch(e){o(e)}}))}}),he=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return u?I[e].apply(I,t):a?pe[e].apply(pe,t):o?le[e].apply(le,t):l?ce[e].apply(ce,t):i?de[e].apply(de,t):d?ge[e].apply(ge,t):Promise.reject()};e.addEventListener=h,e.alert=function(e,t){return he("alert",e,t)},e.alipay=le,e.call=he,e.cdpFeedback=function(e,t,n){return void 0===n&&(n="SHOW"),he("cdpFeedback",e,t,n)},e.closeWebview=function(){return he("closeWebview")},e.confirm=function(e,t){return he("confirm",e,t)},e.detect=g,e.getCdpSpaceInfo=function(e,t){return he("getCdpSpaceInfo",e,t)},e.getCdpSpaceInfos=function(e,t){return he("getCdpSpaceInfos",e,t)},e.getTitleAndStatusbarHeight=function(){return he("getTitleAndStatusbarHeight")},e.hideLoading=function(){return he("hideLoading")},e.isAlipay=o,e.isAmap=p,e.isDingTalk=c,e.isIOS=n,e.isInside=f,e.isKoubei=i,e.isKoubeiMerchant=r,e.isMyBank=l,e.isQianNiu=d,e.isTaobao=a,e.isTmall=u,e.isWealth=s,e.koubei=de,e.mybank=ce,e.onBack=function(e){return h("back",e)},e.onPause=function(e){return h("pause",e)},e.onPullToRefresh=function(e){return h("firePullToRefresh",e)},e.onReady=function(e){return he("ready",e)},e.onResume=function(e){return h("resume",e)},e.optionMenu=function(e,t){return he("optionMenu",e,t)},e.popWindow=function(){return he("popWindow")},e.pushWindow=function(e,t){return he("pushWindow",e,t)},e.qianniu=ge,e.restorePullToRefresh=function(){return he("restorePullToRefresh")},e.setTitle=function(e){return he("setTitle",e)},e.setTitleColor=function(e,t){return he("setTitleColor",e,t)},e.setTransparentTitle=function(e){return he("setTransparentTitle",e)},e.showLoading=function(){return he("showLoading")},e.taobao=pe,e.tmall=I,e.toast=function(e,t){return he("toast",e,t)},Object.defineProperty(e,"__esModule",{value:!0})}));
